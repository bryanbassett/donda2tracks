<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
   
    <script>
let tracks={},tablehtml='',versions={},versionsHTML='';

setTimeout(function(){getTrackInfo();},0x1);

function makeTable(input){
  $(input)['each'](function(e,o){
    if(typeof versions[o['metadata']['version']] == 'undefined'){
      versions[o['metadata']['version']] = 1;
    }else{
      versions[o['metadata']['version']]++;
    }
    tablehtml+='<tr class="trackRow version'+o['metadata']['version']+'"><td>'+(e+0x1)+'</td><td>'+o['metadata']['title']+'</td><td>'+o['metadata']['version']+'</td>';}),$('#mainHole')['html'](tablehtml);
    doVersionHTML(versions);

  }
  function doVersionHTML(input){
    console.log(input);
    $.each(input,function(e,o){
      console.log(e,o);
      versionsHTML+=('<div class="col-sm-3"> <div class="card" style="width: 18rem;">'+
                '<div class="card-body">'+
                  '<h5 class="card-title">Version '+e+'</h5>'+
                  '<button class="btn btn-primary btn-lg" onclick="highlightVersions(\''+'version'+e+'\')">'+o+'</button>'+
                '</div>'+
              '</div></div>');
    });
    $('#cards').html(versionsHTML);
  }
  function highlightVersions(versionClass){
    $('.trackRow').removeClass('bg-info');
    setTimeout(function(){
      $('.'+versionClass).addClass('bg-info');
    },1)

  }

  function getTrackInfo(){
    $['get']('https://api.stemplayer.com/content/albums',function(data){
      tracks=data['data']['donda_2']['tracks'],makeTable(tracks);
      });
    }

    </script>
</head>

    <body class="text-center">

        <div class="cover-container d-flex h-100 p-3 mx-auto flex-column">
          <header class="masthead mb-auto">
            <div class="inner">
              <h3 class="masthead-brand">DONDA 2 TRACK VERSIONS</h3>
            </div>
          </header>
    
          <main role="main" class="inner cover">
            <div class="container">
              <div id="cards" class="row">

              </div>

            </div>
            <div class="table-responsive">
                <table class="table table-striped table-sm">
                  <thead >
                    <tr>
                      <th>#</th>
                      <th>Track Name</th>
                      <th>Version #</th>
                    </tr>
                  </thead>
                  <tbody id="mainHole">
                    <tr>
                      <td></td>
                      <td>loading</td>
                      <td></td>
                      <td></td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
              </div>
          </main>
    
          <footer class="mastfoot mt-auto">
            <div class="inner">
              <p>made by bbassett - cash app if u appreciate the waves $bassett91</p>
            </div>
          </footer>
        </div>
    

    </body>
</html>